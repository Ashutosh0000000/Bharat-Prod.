services:
  - name: bharat-product-web
    type: web
    env: docker
    dockerfilePath: ./Dockerfile
    envVars:
      - key: POSTGRES_USER
        value: postgres
      - key: POSTGRES_PASSWORD
        value: password
      - key: POSTGRES_DB
        value: bharat_products_db

      # Use static connection strings instead of fromService
      - key: DATABASE_URL
        value: postgresql://postgres:password@postgres:5432/bharat_products_db
      - key: REDIS_URL
        value: redis://redis:6379/0

      - key: OPENAI_API_KEY
        sync: false

# Redis service
  - name: redis
    type: redis
    plan: starter

# Postgres service
databases:
  - name: postgres
    plan: starter
    databaseName: bharat_products_db

services:
  - name: bharat-product-web
    type: web
    env: docker
    dockerfilePath: ./Dockerfile
    startCommand: uvicorn app.main:app --host 0.0.0.0 --port $PORT
    envVars:
      - key: POSTGRES_USER
        value: postgres
      - key: POSTGRES_PASSWORD
        value: password
      - key: POSTGRES_DB
        value: bharat_products_db

      # Render Postgres connection
      - key: DATABASE_URL
        fromService:
          name: postgres
          property: connectionString

      # Render Redis connection
      - key: REDIS_URL
        fromService:
          name: redis
          property: connectionString

      # Your OpenAI API Key stored in Render Dashboard (NOT in repo)
      - key: OPENAI_API_KEY
        sync: false

  # Redis service on Render
  - name: redis
    type: redis
    plan: starter
    ipAllowList: []

databases:
  - name: postgres
    plan: starter
    databaseName: bharat_products_db
    user: postgres
    password: password
